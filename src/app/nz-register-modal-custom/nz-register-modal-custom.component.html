<div class="txtCenter">
  <img src="../../assets/login_phone.scale-200.png" style="width: 200px" />
  <form
    *ngIf="registerForm != null"
    nz-form
    [formGroup]="registerForm"
  >
    <nz-form-item>
      <nz-form-label [nzSm]="6" nzRequired [nzXs]="24" nzFor="nickName">
        <span>
          用户名
        </span>
      </nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-input-group style="margin: 5px 0">
          <input
            type="text"
            nz-input
            placeholder="请输入用户名"
            required
            formControlName="nickName"
            maxlength="15"
          />
        </nz-input-group>

        <nz-form-explain
          *ngIf="
            registerForm.get('nickName') != null &&
            registerForm.get('nickName').dirty &&
            registerForm.get('nickName').errors &&
            registerForm.get('nickName').errors.required
          "
          >请输入你的用户名!</nz-form-explain
        >
        <nz-form-explain
          *ngIf="
            registerForm.get('nickName') != null &&
            registerForm.get('nickName').dirty &&
            registerForm.get('nickName').errors &&
            registerForm.get('nickName').errors.pattern
          "
          >用户名不能包含空格!</nz-form-explain
        >
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSm]="6" nzRequired [nzXs]="24" nzFor="phoneNum">
        <span>
          手机号码
        </span>
      </nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-input-group [nzPrefix]="phonePrefix" style="margin: 5px 0">
          <input
            type="text"
            nz-input
            placeholder="请输入手机号"
            required
            formControlName="phoneNum"
          />
          <ng-template #phonePrefix>
            <i nz-icon nzType="mobile" nzTheme="outline"></i>
          </ng-template>
        </nz-input-group>

        <nz-form-explain
          *ngIf="
            registerForm.get('phoneNum') != null &&
            registerForm.get('phoneNum').dirty &&
            registerForm.get('phoneNum').errors &&
            registerForm.get('phoneNum').errors.required
          "
          >请输入你的手机号!</nz-form-explain
        >
        <nz-form-explain
          *ngIf="
            registerForm.get('phoneNum') != null &&
            registerForm.get('phoneNum').dirty &&
            registerForm.get('phoneNum').errors &&
            registerForm.get('phoneNum').errors.pattern
          "
          >手机号码格式错误!</nz-form-explain
        >
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSm]="6" nzRequired [nzXs]="24" nzFor="passWord">
        <span>
          密码
        </span>
      </nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-input-group style="margin: 5px 0" [nzSuffix]="suffixTemplate">
          <input
            [type]="passwordVisible ? 'text' : 'password'"
            nz-input
            placeholder="请输入密码"
            formControlName="passWord"
          />
          <ng-template #suffixTemplate>
            <i
              nz-icon
              [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
              (click)="passwordVisible = !passwordVisible"
            ></i>
          </ng-template>
        </nz-input-group>

        <nz-form-explain
          *ngIf="
            registerForm.get('passWord') != null &&
            registerForm.get('passWord').dirty &&
            registerForm.get('passWord').errors &&
            registerForm.get('passWord').errors.required
          "
          >请输入密码!</nz-form-explain
        >
        
        <nz-form-explain
          *ngIf="
            registerForm.get('passWord') != null &&
            registerForm.get('passWord').dirty &&
            registerForm.get('passWord').errors &&
            (registerForm.get('passWord').errors.minlength ||
            registerForm.get('passWord').errors.maxlength)
           
          "
          >密码长度为6-16位!</nz-form-explain
        >
         <nz-form-explain
          *ngIf="
            registerForm.get('passWord') != null &&
            registerForm.get('passWord').dirty &&
            registerForm.get('passWord').errors &&
            (registerForm.get('passWord').errors.pattern||
            registerForm.get('passWord').errors.notMatch)
          "
          >密码不能包含空格,包含字母、数字、符号中至少两种!</nz-form-explain
        > 
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" nzRequired [nzXs]="24" nzFor="rePassWord">
        <span>
          确认密码
        </span>
      </nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-input-group style="margin: 5px 0">
          <input
            type="password"
            nz-input
            placeholder="再次输入密码"
            formControlName="rePassWord"
          />
        </nz-input-group>

        <nz-form-explain
          *ngIf="
            registerForm.get('rePassWord') != null &&
            registerForm.get('rePassWord').dirty &&
            registerForm.get('rePassWord').errors &&
            registerForm.get('rePassWord').errors.required
          "
          >请再次输入密码!</nz-form-explain
        >
        <nz-form-explain  style="color: red;"
          *ngIf="
            registerForm.get('rePassWord') != null &&
            registerForm.get('rePassWord').dirty &&
            registerForm.errors &&
            registerForm.errors.passWordInvalid
          "
          >两次输入的密码不一致!</nz-form-explain
        >
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSm]="6" nzRequired [nzXs]="24" nzFor="captcha">
        <span>
          验证码
        </span>
      </nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <div class="flexCenterDiv">
          <nz-input-group style="margin: 5px 0">
            <input
              nz-input
              required
              [readonly]="!allowInutCaptcha"
              formControlName="captcha"
            />
          </nz-input-group>
          <button
            nz-button
            nzType="primary"
            [disabled]="!canSendCaptcha"
            style="margin-left: 10px;"
            (click)="sendCaptcha()"
          >
            发送验证码{{
              sendCaptchaRemainSeconds > 0
                ? "(" + sendCaptchaRemainSeconds + "s)"
                : ""
            }}
          </button>
        </div>

        <nz-form-explain
          *ngIf="
            registerForm.get('captcha') != null &&
            registerForm.get('captcha').dirty &&
            registerForm.get('captcha').errors &&
            registerForm.get('captcha').errors.required
          "
          >请输入验证码!</nz-form-explain
        >
        <nz-form-explain
          *ngIf="
            registerForm.get('captcha') != null &&
            registerForm.get('captcha').dirty &&
            registerForm.get('captcha').errors &&
            registerForm.get('captcha').errors.maxlength
          "
          >验证码格式错误!
        </nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control>
        <button
          nz-button
          nzSize="large"
          [nzType]="'primary'"
          [nzLoading]="registerProcessing"
          [disabled]="registerForm.invalid"
          type="submit"
          style="width: 300px;"
          (click)="register()"
        >
          提交
        </button>
      </nz-form-control>
    </nz-form-item>
  </form>
</div>
