<div>
  <div class="topLrcPart">
    <div class="topDiskPart">
      <img
        src="../../assets/player_needle.scale-200.png"
        class="topImgRotate"
        [ngStyle]="{
          transform:
            audioService.ended || audioService.paused
              ? 'rotateZ(-45deg)'
              : 'rotateZ(-0deg)'
        }"
      />
      <div
        class="topDiskImg"
        style="background-image: url('../../assets/player_disk_cover.scale-200.png')"
      >
        <img
          [src]="currentMusic.picUrl"
          *ngIf="currentMusic.picUrl"
          class="topImgClip"
        />
      </div>
      <div
        nz-row
        nzGutter="8"
        class="otherControlPartFather"
        *ngIf="audioService.CurrentPlayTrackType != 1000"
      >
        <div nz-col nzSpan="6" style=" margin-left: 30px;">
          <div  (click)="topPartControlClick(0)">
            <i nz-icon nzType="folder-add" nzTheme="outline"></i>收藏
          </div>
        </div>
        <div nz-col nzSpan="6">
          <div (click)="topPartControlClick(1)" *ngIf="currentMusic">
            <i
              nz-icon
              nzType="heart"
              nzTheme="outline"
              *ngIf="!currentMusic.isLike"
            ></i>
            <i nz-icon style="color: red;" *ngIf="currentMusic.isLike">
              <svg>
                <path
                  d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"
                />
              </svg>
            </i>
            喜欢
          </div>
        </div>
        <div nz-col nzSpan="6">
          <div (click)="topPartControlClick(2)">
            <i nz-icon nzType="download" nzTheme="outline"></i>下载
          </div>
        </div>
      </div>
      <div
        nz-row
        nzGutter="8"
        *ngIf="audioService.CurrentPlayTrackType == 1000"
        class="fmControlPartFather"
      >
        <div style=" margin-left: 30px;" nz-col nzSpan="4">
          <button
            nz-button
            nzType="default"
            nzShape="circle"
            (click)="topPartControlClick(1)"
          >
            <i
              nz-icon
              nzType="heart"
              nzTheme="outline"
              *ngIf="!currentMusic.isLike"
            ></i>
            <i nz-icon style="color: red;" *ngIf="currentMusic.isLike">
              <svg>
                <path
                  d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"
                /></svg
            ></i>
          </button>
        </div>
        <div nz-col nzSpan="4">
          <button
            nz-button
            nzType="default"
            nzShape="circle"
            (click)="trashFMClick()"
          >
            <i nz-icon nzType="delete" nzTheme="outline"></i>
          </button>
        </div>
        <div nz-col nzSpan="4">
          <button
            nz-button
            nzType="default"
            nzShape="circle"
            (click)="fMNextClick()"
          >
            <i nz-icon nzType="step-forward" nzTheme="outline"></i>
          </button>
        </div>
        <div nz-col nzSpan="4">
          <nz-dropdown>
            <button nz-button nzType="default" nzShape="circle" nz-dropdown>
              <i nz-icon nzType="ellipsis" nzTheme="outline"></i>
            </button>
            <ul nz-menu nzSelectable>
              <li nz-menu-item (click)="topPartControlClick(0)">收藏</li>
              <li nz-menu-item>分享</li>
              <li nz-menu-item>下载</li>
              <li nz-menu-item>查看垃圾桶列表</li>
            </ul>
          </nz-dropdown>
        </div>
      </div>
    </div>
    <div class="flexCenterDiv fullWidth">
      <div class="topLrcRight">
        <div class="windowMainFont">{{ currentMusic.name }}</div>
        <div
          class="flexCenterDiv"
          [ngSwitch]="audioService.CurrentPlayTrackType"
        >
          <ng-container *ngSwitchCase="1">
            <div class="topLrcRightLinks">
              专辑:
              <a
                class="smallLink"
                [routerLink]="['/album', currentMusic.album.id]"
                >{{ currentMusic.album.name }}</a
              >
            </div>
            <div class="topLrcRightLinks">
              歌手：
              <ng-container
                *ngFor="let artist of currentMusic.artists; let idex = index"
              >
                <a
                  *ngIf="idex <= 3"
                  [routerLink]="['/artist', artist.id]"
                  class="smallLink"
                  >{{ artist.name }}&nbsp;</a
                >
              </ng-container>
            </div>
          </ng-container>

          <ng-container *ngSwitchCase="100">
            <div class="topLrcRightLinks">
              专辑: {{ audioService.currentTrack.album }}
            </div>
            <div class="topLrcRightLinks">
              歌手：{{ audioService.currentTrack.artist }}
            </div>
          </ng-container>
          <ng-container *ngSwitchCase="1000">
            <div class="topLrcRightLinks">
              专辑:
              <a
                class="smallLink"
                [routerLink]="['/album', currentMusic.album.id]"
                >{{ currentMusic.album.name }}</a
              >
            </div>
            <div class="topLrcRightLinks">
              歌手：
              <ng-container
                *ngFor="let artist of currentMusic.artists; let idex = index"
              >
                <a
                  *ngIf="idex <= 3"
                  [routerLink]="['/artist', artist.id]"
                  class="smallLink"
                  >{{ artist.name }}&nbsp;</a
                >
              </ng-container>
            </div>
          </ng-container>
        </div>

        <div class="topLrcPanel">
          <nz-spin [nzTip]="'歌词加载中...'" [nzSpinning]="isLrcLoading">
            <ul
              #lrcUl
              (mouseover)="isMouseOver = true"
              (mouseout)="isMouseOver = false"
            >
              <li
                *ngFor="let lrc of lyrics; let i = index"
                (click)="lrcClick(i)"
              >
                {{ lrc.value }}
              </li>
            </ul>
          </nz-spin>
        </div>
      </div>
    </div>
  </div>
  <div>
    <div nz-row nzGutter="8">
      <div nz-col nzSpan="15">
        <app-comment
          [commentThreadId]="commentThreadId"
          *ngIf="commentThreadId"
        >
          <!-- <ng-template #commentRignt>
      
  </ng-template> -->
        </app-comment>
      </div>
      <div nz-col nzSpan="9" class="commentRightPart">
        <div class="descriptHeader">包含这首歌的歌单</div>
        <nz-divider></nz-divider>
        <nz-list
          [nzDataSource]="containThisMusic"
          [nzRenderItem]="playListItem"
        >
          <ng-template #playListItem let-playList>
            <nz-list-item
              class="pointerCursor"
              [routerLink]="['/playlistdetail', playList.id]"
            >
              <nz-list-item-meta
                [nzTitle]="playList.name"
                [nzAvatar]="playList.picUrl"
                [nzDescription]="playCountTemplate"
              >
                <ng-template #playCountTemplate
                  >播放：{{ playList.playCount | countpipe }}</ng-template
                >
              </nz-list-item-meta>
            </nz-list-item>
          </ng-template>
        </nz-list>

        <hr />
        <hr />
        <div class="descriptHeader">相似歌曲</div>
        <nz-divider></nz-divider>
        <nz-list
          [nzDataSource]="simiMusics"
          [nzRenderItem]="simiMusicItem"
          id="lstSimiMusic"
        >
          <ng-template #simiMusicItem let-simiMusic>
            <nz-list-item class="nothing pointerCursor" (click)="simiMusicClick(simiMusic)" >
              <div
                class="simiMusicDiv noWrap"
                
              >
                <div class="flexLastFull">{{ simiMusic.name }}</div>
                <div class="artist">{{ simiMusic.artists[0].name }}</div>
              </div>
            </nz-list-item>
          </ng-template>
        </nz-list>
      </div>
    </div>
  </div>
</div>
